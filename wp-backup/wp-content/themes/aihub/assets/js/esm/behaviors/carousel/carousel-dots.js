import d from"../base.js";class a extends d{static name="liquidCarouselDots";static model=new Backbone.Model(this.initialModelProps);dotClassname="lqd-carousel-dot inline-block flex-shrink-0 flex-grow-0 basis-auto overflow-hidden -indent-full";activeClassname=["lqd-is-active","lqd-carousel-dot-active"];dotTextContent="View slide";dots=[];get viewEvents(){return{"carousel:activate":"onCarouselActivate","carousel:select":"updateSelectedDots","carousel:itemChange":"updateDots","carousel:resize":"updateDots"}}get ui(){return{dotsHolder:".lqd-carousel-dots",dots:".lqd-carousel-dot"}}get bindToThis(){return["onDotsClick"]}onCarouselActivate(){this.dots=[],this.activateDots()}setDots(){let t=this.view.carouselSlides.length-this.dots.length;t>0?this.addDots(t):t<0&&this.removeDots(-t)}addDots(t){let e=new Array(t).fill().map((o,i)=>{let s=document.createElement("button");s.setAttribute("type","button");let l=i+1+this.dots.length;return s.className=this.dotClassname,s.textContent=`${this.dotTextContent} ${l}`,s});this.getUI("dotsHolder")[0].append(...e),this.dots=this.dots.concat(e),this.getUI("dotsHolder")[0].classList.remove("lqd-carousel-dots-empty")}removeDots(t){this.dots.splice(this.dots.length-t,t).forEach(o=>o.remove())}updateSelectedDot(t){this.selectedDot&&(this.selectedDot.classList.remove(...this.activeClassname),this.selectedDot.removeAttribute("aria-current")),this.dots.length&&(this.selectedDot=this.dots[t]||this.dots[0],this.selectedDot.classList.add(...this.activeClassname),this.selectedDot.setAttribute("aria-current","step"))}activateDots(){this.setDots(),this.view.focusableElems.push(...this.dots),this.getUI("dotsHolder")[0].addEventListener("click",this.onDotsClick)}onDotsClick(t){let e=this.dots.indexOf(t.target);e!==-1&&(this.view.trigger("carousel:uiChange"),this.view.trigger("carousel:select",e))}updateSelectedDots(){this.updateSelectedDot(this.view.selectedIndex)}updateDots(){this.dots.forEach(t=>{this.view.focusableElems=this.view.focusableElems.filter(e=>e!==t)}),this.setDots(),this.view.focusableElems.push(...this.dots)}destroy(){this.removeDots(this.dots.length),this.getUI("dotsHolder")[0].removeEventListener("click",this.onDotsClick),super.destroy()}}export default a;
